### Compile - Native App and Fat Jar
#### Ref : https://www.graalvm.org/22.0/reference-manual/native-image/StaticImages/

Pre-requisites

    Add -H:+StaticExecutableWithDynamicLibC flag for native compile for mostly static images
    
    Ubuntu / WSL
    #sudo apt-get install build-essential libz-dev zlib1g-dev

Commands

    # Open cmd / bash - Root Directory
    ./gradlew.bat nativeCompile # Windows
    ./gradlew nativeCompile # Linux / bash

    # Validation - Native Image [cmd / bash]
    Run command: ./build/native/nativeCompile/graalvm-spring-reactor-native

    # Validation - Jar File creation [cmd / bash]
    Run command: java -jar ./build/libs/graalvm-spring-reactor-native-0.0.1-SNAPSHOT.jar

#### Docker commands - Custom docker image using Dockerfile - with Native build

Build image using dockerfile with mostly static native app generated by Ubuntu (WSL) 

    docker image rm -f graalvm-spring-reactor-native-app:1.0
    docker build -t graalvm-spring-reactor-native-app:1.0 -f Dockerfile-native .
    
Deploy image build by Spring gradle target :bootBuildImage
    
    docker container rm -f graalvm-spring-reactor-native-app
    docker run -d -p 8081:8080 --memory=128m --cpus="2" --name graalvm-spring-reactor-native-app graalvm-spring-reactor-native-app:1.0

#### Docker commands - Custom docker image using Dockerfile - JAR with JRE

Build image using dockerfile with fat jar and jre image

    docker image rm -f graalvm-spring-reactor-jar-app:1.0
    docker build -t graalvm-spring-reactor-jar-app:1.0 -f Dockerfile-jar .

Deploy image build with JAR file

    docker container rm -f graalvm-spring-reactor-jar-app
    docker run -d -p 8082:8080 --memory=128m --cpus="2" --name graalvm-spring-reactor-jar-app graalvm-spring-reactor-jar-app:1.0

#### Benchmark

Command to benchmark and run similar load against various docker images for performance measure

    wrk -t200 -c400 -d30s http://localhost:8081/hello/Nitin  # Native App
    wrk -t200 -c400 -d30s http://localhost:8082/hello/Nitin  # JRE Jar App